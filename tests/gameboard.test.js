import Gameboard from "../modules/gameboard";

test("Test Gameboard with hit and miss cases", () => {
  const game = new Gameboard();
  // let matrix = game.display();

  expect(game.display()).toEqual([ 
    [ '-', '-', '-', '-', '-', '-', 'X', 'X', 'X', 'X' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ 'X', 'X', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', 'X', 'X', 'X' ],
    [ '-', 'X', 'X', '-', '-', '-', '-', '-', '-', '-' ]
  ]);
  expect(game.isAllShipsSunk()).toBe(false);

  // Miss case
  game.receiveAttack(0, 0);
  expect(game.display()).toEqual([ 
    [ 'M', '-', '-', '-', '-', '-', 'X', 'X', 'X', 'X' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ 'X', 'X', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', 'X', 'X', 'X' ],
    [ '-', 'X', 'X', '-', '-', '-', '-', '-', '-', '-' ]
  ]);

  // Hit case
  game.receiveAttack(0, 9);
  expect(game.display()).toEqual([ 
    [ 'M', '-', '-', '-', '-', '-', 'X', 'X', 'X', 'H' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ 'X', 'X', 'X', 'X', 'X', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', 'X', 'X', 'X' ],
    [ '-', 'X', 'X', '-', '-', '-', '-', '-', '-', '-' ]
  ]);
  expect(game.isAllShipsSunk()).toBe(false);

  // Attack all ships
  game.receiveAttack(0, 6);
  game.receiveAttack(0, 7);
  game.receiveAttack(0, 8);

  game.receiveAttack(3, 2);
  game.receiveAttack(3, 3);
  game.receiveAttack(3, 4);
  
  game.receiveAttack(5, 0);
  game.receiveAttack(5, 1);
  game.receiveAttack(5, 2);
  game.receiveAttack(5, 3);
  game.receiveAttack(5, 4);

  game.receiveAttack(8, 7);
  game.receiveAttack(8, 8);
  game.receiveAttack(8, 9);
  expect(game.isAllShipsSunk()).toBe(false);

  game.receiveAttack(9, 1);
  game.receiveAttack(9, 2);
  expect(game.display()).toEqual([ 
    [ 'M', '-', '-', '-', '-', '-', 'H', 'H', 'H', 'H' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', 'H', 'H', 'H', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ 'H', 'H', 'H', 'H', 'H', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', '-', '-', '-' ],
    [ '-', '-', '-', '-', '-', '-', '-', 'H', 'H', 'H' ],
    [ '-', 'H', 'H', '-', '-', '-', '-', '-', '-', '-' ]
  ]);
  expect(game.isAllShipsSunk()).toBe(true);
});